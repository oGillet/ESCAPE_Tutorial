<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>index.knit</title>

<script src="site_libs/header-attrs-2.12/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">ESCAPE - Application web</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Tutorial</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:&lt;gillet.olivier@outlook.fr&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/ogillet/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<style>
body {text-align: justify}
</style>
<p><img src="images/TUTORIAL.png" /></p>
<p>Nous proposons ici un tutoriel pour permettre aux modélisateurs d’utiliser les outils <strong>ESCAPE</strong> via la plateforme de simulation <strong>GAMA</strong> et l’application web “ESCAPE_input_generator”. Ce tutoriel est composé de plusieurs étapes (générer les inputs du système, créer l’environnement du système, utiliser des outils <strong>ESCAPE</strong>, réaliser quelques statistiques sur le modèle d’évacuation).</p>
<p>Ce tutoriel présente le développement d’un système simulant de l’évacuation, fictive et peu probable, de la population de la commune du Genétay lors d’un feu de forêt.</p>
<div id="créer-un-projet-gama-escape" class="section level2">
<h2><strong>Créer un projet GAMA ESCAPE</strong></h2>
<div id="génerer-les-inputs-du-modèle" class="section level3">
<h3><strong><em>Génerer les inputs du modèle </em></strong></h3>
<ol style="list-style-type: decimal">
<li>Se rendre sur <a href="https://analytics.huma-num.fr/Olivier.Gillet/escape_inputs_generator/">l’application web ESCAPE</a></li>
<li>Télécharger les données d’intérêt pour votre système :<br />
</li>
</ol>
<ul>
<li>Study area</li>
<li>Evacuation points</li>
<li>Assembly points</li>
<li>Departure point for buses</li>
<li>Escape road</li>
<li>Avoid road</li>
<li>Siren(s)</li>
<li>Mobile siren(s)</li>
</ul>
<p>⚠️ ⚠️ ⚠️ Quelques soient les données à télécharger, vous devez créer le shapefile de votre zone d’étude car il est nécessaire pour obtenir l’extension spatiale de la zone d’étude afin de télécharger les données <a href="https://www.openstreetmap.org">OpenStreetMap</a>. Vous pouvez retrouver ces coordonnées (Xmin, Xmax, Ymin, Xmin, EPSG::4326) en bas de la page web après création du polygone de la zone d’étude.</p>
<hr />
<p><strong>Bounding box de notre zone d’étude</strong><br />
<em>Xmin ==&gt; 0.940790176391602</em><br />
<em>Xmmax ==&gt; 0.996665954589844</em><br />
<em>Ymin ==&gt; 49.4153288319765</em><br />
<em>Ymax ==&gt; 49.4536194132892</em></p>
<hr />
<p>La procédure de création est simple, choisir la donnée dans le menu déroulant, activer le mode édition puis cliquer sur la carte. Les polygones ou les lignes, telles que Escape road ou Study area, nécessitent au minimum deux ou trois points sur la carte. Vous devez valider la géométrie pour générer votre entité.</p>
<p><img src="images/DOWNLOAD_INPUTS.png" /></p>
<ul>
<li>Vous pouvez par la suite télécharger vos données. Vous trouverez une archive composée de plusieurs shapefiles <em>.shp</em> et d’un fichier text <em>.csv</em> d’organisation des transports en commun. Cette archive est à extraire dans le répertoire <em>include</em> 📁 de votre projet GAMA <strong>ESCAPE</strong>.</li>
</ul>
<p><img src="images/ARCHIVE.png" /></p>
<p>Pour ce tutoriel, nous avons exporté:</p>
<ul>
<li><em>standard_evac_points.shp</em>, point de fuite des agents véhiculés<br />
</li>
<li><em>sirens-point.shp</em>, localisation des sirènes fixes<br />
</li>
<li><em>shelter.shp</em>, fichier avec les points de rassemblement et les abris<br />
</li>
<li><em>roads_evac.shp</em>, itinéraire d’évacuation<br />
</li>
<li><em>evac_bus_stop.shp</em>, localisation des arrêts de bus<br />
</li>
<li><em>evac_area.shp</em>, zone d’étude<br />
</li>
<li><em>evacuation_bus_file_map.csv</em>, fichier pour la gestion des norias</li>
</ul>
</div>
<div id="créer-lenvironnement-du-système" class="section level3">
<h3><strong><em>Créer l’environnement du système </em></strong></h3>
<ul>
<li>Ensuite, vous devez vous rendre sur le site web d’OpenStreetMap <a href="https://www.openstreetmap.org">OpenStreetMap</a><br />
</li>
<li>Renseigner les coordonnées obtenues précédemment (Xmin, Xmax, Ymin, Xmin, EPSG::4326) et télécharger les données <a href="https://www.openstreetmap.org">OpenStreetMap</a> (routes et bâtiments).Vous obtenez un fichier au format .osm et est à utiliser via les outils <strong>ESCAPE</strong> pour générer l’environnement.</li>
<li>Les données téléchargées, <a href="https://www.openstreetmap.org">OpenStreetMap</a> comme pour les données <strong>ESCAPE</strong>, sont à extraire dans le répertoire <em>include</em> 📁 de votre projet GAMA <strong>ESCAPE</strong>.</li>
</ul>
<p><img src="images/OSM.png" /><br />
Au total, vous devez créer trois fichiers <em>.gaml</em> pour exécuter votre modèle dont deux pour créer l’environnement d’exécution du système: (1) Le premier script <em>.gaml</em> a pour objectif de créer votre environnement à partir du <em>xml</em> d’<a href="https://www.openstreetmap.org">OpenStreetMap</a>. (2) Le second script obligatoire sert à calculer la calculer la matrice des plus courts chemins. (3) Le troisième script est le script principal de votre modèle d’évacuation. La définition et l’exécution du modèle se fait dans ce troisième script.</p>
<p>📣Vous trouverez davantage d’informations sur la page web dédiée à l’import des données OSM sur le de <a href="https://gama-platform.org/wiki/ManipulateOSMDatas"><em>GAMA</em></a></p>
<p><img src="images/GAMA_1.png" /></p>
</div>
<div id="exécuter-le-modèle" class="section level3">
<h3><strong><em>Exécuter le modèle </em></strong></h3>
<p><img src="images/MODEL.gif" /></p>
</div>
</div>
<div id="explorer-les-sorties-du-modèle" class="section level2">
<h2><strong>Explorer les sorties du modèle</strong></h2>
<div id="importer-les-résultats-dans-lapplication" class="section level3">
<h3><strong><em>Importer les résultats dans l’application</em></strong></h3>
<p>Vous devez uploader dans l’onglet <em>output</em> les divers shapefiles :</p>
<ul>
<li>car_evacuation_time.shp</li>
<li>people_evacuation_time.shp</li>
<li>roads_traffic.shp</li>
</ul>
<p>⚠️ Il n’est pas nécessaire d’archiver les données avant l’upload. Vous pouvez télécharger les résultats pour ce modèle d’évacuation aux adresses suivantes :<br />
- <a href="https://github.com/oGillet/ESCAPE_Tutorial/tree/main/shp">Github</a><br />
- <a href="https://drive.google.com/drive/folders/1NvSb2cKYliLWKZnoFkkAFzGmlRIVmzj7?usp=sharing">Google</a></p>
<p><img src="images/RESULTS.png" /></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
